<!DOCTYPE html>
<html lang="es">
<head>
  <meta charset="UTF-8">
  <title>Identificacion de funciones</title>
  <style>
    body {
      font-family: "Consolas", monospace;
      background: #0f2027;  /* gradiente tipo inform√°tico */
      background: linear-gradient(to right, #0f2027, #203a43, #2c5364);
      color: #f1f1f1;
      margin: 0;
      padding: 20px;
    }
    h1 {
      text-align: center;
      color: #00eaff;
    }
    p {
      text-align: center;
      font-size: 18px;
      margin-bottom: 30px;
    }
    .code-container {
      background: #1e1e1e;
      border-radius: 10px;
      padding: 20px;
      position: relative;
      box-shadow: 0 0 15px rgba(0,0,0,0.5);
      max-width: 900px;
      margin: auto;
    }
    pre {
      background: #1e1e1e;
      color: #00ffcc;
      padding: 15px;
      border-radius: 8px;
      overflow-x: auto;
      font-size: 15px;
      line-height: 1.5;
    }
    .buttons {
      display: flex;
      justify-content: flex-end;
      gap: 10px;
      margin-bottom: 10px;
    }
    button, a.pdf-btn {
      background: #00eaff;
      color: #000;
      border: none;
      padding: 8px 15px;
      border-radius: 5px;
      cursor: pointer;
      font-weight: bold;
      text-decoration: none;
    }
    button:hover, a.pdf-btn:hover {
      background: #00b3cc;
    }
  </style>
</head>
<body>
  <h1>üìò Identificacion de funciones</h1>
  <p>Este codigo identifica si una expresion es una funcion o una ecuacion</p>

  <div class="code-container">
    <div class="buttons">
      <button onclick="copiarCodigo()">üìã Copiar C√≥digo</button>
      <a href="tarea.pdf" target="_blank" class="pdf-btn">üìë Ver PDF</a>
    </div>

    <pre id="codigo">
import tkinter as tk
from tkinter import ttk, messagebox
import sympy as sp
import re

def analizar():
    expresion = entrada.get().strip()

    if not expresion:
        messagebox.showwarning("Error", "Por favor ingresa una expresi√≥n matem√°tica.")
        return

    # Reemplazar ^ por ** para potencias
    expresion = expresion.replace("^", "**")

    # üîπ Agregar * cuando falta (ej: 5x -> 5*x, 2y -> 2*y, xy -> x*y)
    expresion = re.sub(r'(\d)([a-zA-Z])', r'\1*\2', expresion)
    expresion = re.sub(r'([a-zA-Z])(\d)', r'\1*\2', expresion)
    expresion = re.sub(r'([a-zA-Z])([a-zA-Z])', r'\1*\2', expresion)

    try:
        if "=" in expresion:
            izquierda, derecha = expresion.split("=")
            lhs = sp.sympify(izquierda.strip())
            rhs = sp.sympify(derecha.strip())
            eq = sp.Eq(lhs, rhs)
        else:
            lhs, rhs = sp.symbols("y"), sp.sympify(expresion)
            eq = sp.Eq(lhs, rhs)

        variables = list(eq.free_symbols)
        num_vars = len(variables)

        y = sp.Symbol("y")
        if y in variables:
            soluciones = sp.solve(eq, y)
        else:
            var_dep = variables[0]
            soluciones = sp.solve(eq, var_dep)

        operaciones = sum(expresion.count(op) for op in "+-*/**")

        resultado_texto = f"Expresi√≥n: {expresion}\n"
        resultado_texto += f"Variables encontradas: {', '.join(str(v) for v in variables)}\n"
        resultado_texto += f"N√∫mero de variables: {num_vars}\n"
        resultado_texto += f"N√∫mero de operaciones: {operaciones}\n"

        if len(soluciones) == 1:
            resultado_texto += f"‚úÖ Es funci√≥n: {soluciones[0]}"
        elif len(soluciones) > 1:
            resultado_texto += f"‚ùå NO es funci√≥n (m√∫ltiples salidas: {soluciones})"
        else:
            resultado_texto += "‚ùå No se pudo determinar si es funci√≥n."

        resultado.set(resultado_texto)

    except Exception as e:
        messagebox.showerror("Error", f"No se pudo analizar la expresi√≥n.\n{e}")

# ---------------------------
ventana = tk.Tk()
ventana.title("Analizador Avanzado de Funciones")
ventana.geometry("500x400")
ventana.configure(bg="#f4f6f7")

estilo = ttk.Style()
estilo.configure("TButton", font=("Arial", 12), padding=6)
estilo.configure("TLabel", font=("Arial", 12))

titulo = tk.Label(
    ventana, text="üîé Analizador Avanzado de Funciones", 
    font=("Arial", 16, "bold"), bg="#f4f6f7", fg="#2c3e50"
)
titulo.pack(pady=10)

entrada = ttk.Entry(ventana, font=("Consolas", 14))
entrada.pack(pady=10, ipadx=20, ipady=5)

btn = ttk.Button(ventana, text="Analizar", command=analizar)
btn.pack(pady=10)

resultado = tk.StringVar()
label_resultado = tk.Label(
    ventana, textvariable=resultado, 
    font=("Consolas", 12), bg="#ecf0f1", fg="#2c3e50", 
    relief="groove", justify="left", anchor="w"
)
label_resultado.pack(fill="both", expand=True, padx=20, pady=10)

ventana.mainloop()
    </pre>
  </div>

  <script>
    function copiarCodigo() {
      const codigo = document.getElementById("codigo").innerText;
      navigator.clipboard.writeText(codigo).then(() => {
        alert("‚úÖ C√≥digo copiado al portapapeles");
      }).catch(() => {
        alert("‚ùå Error al copiar el c√≥digo");
      });
    }
  </script>
</body>
</html>
